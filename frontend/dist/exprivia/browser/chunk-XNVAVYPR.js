import"./chunk-4Z6MCBHL.js";import{C as pe,D as ce}from"./chunk-46GDKIRE.js";import"./chunk-2I77I3E3.js";import"./chunk-FZYR36Q4.js";import{b as ge,c as fe,d as he}from"./chunk-HYC2QBNA.js";import{A as N,B as j,C as A,D as me,E as de,F as ue,o as D,p as y,r as V,s as ne,w as oe,x as ae,y as se,z as le}from"./chunk-MUYZMUET.js";import{a as be}from"./chunk-FM2UL4ME.js";import{Da as p,H as K,Ha as m,Ja as P,L as Q,La as Z,O as X,Ob as ie,Pa as n,Pb as T,Qa as r,Ra as d,Sb as re,V as f,Va as E,W as h,Wb as L,X as S,Xa as c,Y as k,Ya as g,a as H,aa as $,d as _,g as W,gb as l,h as F,hb as w,ib as b,kb as ee,lb as z,m as C,mb as G,n as Y,nb as q,o as J,pb as te,qa as a,ua as U,vb as x,wb as v,za as O}from"./chunk-CEITJAHH.js";function Ce(o,t){o&1&&d(0,"i",24)}function Se(o,t){o&1&&d(0,"i",25)}function Ue(o,t){o&1&&(n(0,"div",26),l(1," Il nome \xE8 obbligatorio "),r())}function Pe(o,t){o&1&&(n(0,"div",26),l(1," Il cognome \xE8 obbligatorio "),r())}function Ee(o,t){o&1&&(n(0,"span"),l(1,"L'email \xE8 obbligatoria"),r())}function Me(o,t){o&1&&(n(0,"span"),l(1,"Inserisci un indirizzo email valido"),r())}function Ie(o,t){if(o&1&&(n(0,"div",26),p(1,Ee,2,0,"span",14)(2,Me,2,0,"span",14),r()),o&2){let e,i,s=g();a(),m("ngIf",(e=s.userForm.get("email"))==null||e.errors==null?null:e.errors.required),a(),m("ngIf",(i=s.userForm.get("email"))==null||i.errors==null?null:i.errors.email)}}function Fe(o,t){o&1&&(n(0,"span"),l(1,"La password \xE8 obbligatoria"),r())}function ke(o,t){o&1&&(n(0,"span"),l(1,"La password deve essere di almeno 6 caratteri"),r())}function Oe(o,t){if(o&1&&(n(0,"div",26),p(1,Fe,2,0,"span",14)(2,ke,2,0,"span",14),r()),o&2){let e,i,s=g(2);a(),m("ngIf",(e=s.userForm.get("password"))==null||e.errors==null?null:e.errors.required),a(),m("ngIf",(i=s.userForm.get("password"))==null||i.errors==null?null:i.errors.minlength)}}function Te(o,t){if(o&1&&(n(0,"div")(1,"label",9),l(2,"Password"),r(),d(3,"input",27),p(4,Oe,3,2,"div",11),r()),o&2){let e,i=g();a(4),m("ngIf",((e=i.userForm.get("password"))==null?null:e.invalid)&&((e=i.userForm.get("password"))==null?null:e.touched))}}function Le(o,t){o&1&&(n(0,"div",26),l(1," Il ruolo \xE8 obbligatorio "),r())}function De(o,t){if(o&1&&(n(0,"div",28)(1,"p",29),l(2),r()()),o&2){let e=g();a(2),w(e.errorMessage)}}function Ve(o,t){o&1&&(n(0,"span",30),d(1,"i",31),r())}var R=class o{constructor(t){this.fb=t;this.userForm=this.fb.group({nome:["",y.required],cognome:["",y.required],email:["",[y.required,y.email]],password:[""],authorities:["ROLE_USER",y.required]})}data={title:"",user:{}};submitted=new $;cancelled=new $;userForm;errorMessage="";isLoading=!1;ngOnInit(){if(this.data&&this.data.user){this.userForm.patchValue({nome:this.data.user.nome||"",cognome:this.data.user.cognome||"",email:this.data.user.email||"",authorities:this.data.user.authorities?.[0]||"ROLE_USER"});let t=this.userForm.get("password");this.data.user.id_user?t?.clearValidators():t?.setValidators([y.required,y.minLength(6)]),t?.updateValueAndValidity()}}onSubmit(){if(this.userForm.valid){this.isLoading=!0,this.errorMessage="";let t=this.userForm.value;t.authorities&&(t.authorities=[t.authorities]),t.password||delete t.password,Object.keys(this.userForm.controls).forEach(e=>{this.userForm.get(e)?.markAsTouched()}),this.submitted.emit(t)}else this.errorMessage="Compila tutti i campi richiesti",Object.keys(this.userForm.controls).forEach(t=>{this.userForm.get(t)?.markAsTouched()})}onCancel(){this.cancelled.emit()}static \u0275fac=function(e){return new(e||o)(U(me))};static \u0275cmp=O({type:o,selectors:[["app-user-form-dialog"]],inputs:{data:"data"},outputs:{submitted:"submitted",cancelled:"cancelled"},decls:44,vars:14,consts:[[2,"position","fixed","top","0","left","0","width","100%","height","100%","background","rgba(0,0,0,0.3)","z-index","99999","display","flex","align-items","center","justify-content","center",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","overflow-hidden","border","border-gray-300","w-full","max-w-lg","mx-4",3,"click"],[3,"ngSubmit","formGroup"],[1,"px-6","py-4","bg-blue-50","border-b","border-gray-200"],[1,"text-lg","font-medium","text-gray-900","flex","items-center"],["class","fas fa-user-plus text-blue-600 mr-2",4,"ngIf"],["class","fas fa-user-edit text-blue-600 mr-2",4,"ngIf"],[1,"px-6","py-4","max-h-96","overflow-y-auto"],[1,"space-y-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","formControlName","nome","placeholder","Inserisci il nome",1,"w-full","border","border-gray-300","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["class","text-sm text-red-600 mt-1",4,"ngIf"],["type","text","formControlName","cognome","placeholder","Inserisci il cognome",1,"w-full","border","border-gray-300","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["type","email","formControlName","email","placeholder","Inserisci l'email",1,"w-full","border","border-gray-300","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],[4,"ngIf"],["formControlName","authorities",1,"w-full","border","border-gray-300","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],["value",""],["value","ROLE_USER"],["value","ROLE_ADMIN"],["class","mt-4 p-3 bg-red-50 border border-red-200 rounded-md",4,"ngIf"],[1,"px-6","py-4","bg-gray-50","border-t","border-gray-200","flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","border","border-gray-300","rounded-md","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50",3,"click","disabled"],["type","submit",1,"px-4","py-2","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],["class","mr-2",4,"ngIf"],[1,"fas","fa-user-plus","text-blue-600","mr-2"],[1,"fas","fa-user-edit","text-blue-600","mr-2"],[1,"text-sm","text-red-600","mt-1"],["type","password","formControlName","password","placeholder","Inserisci la password",1,"w-full","border","border-gray-300","rounded-md","px-3","py-2","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent"],[1,"mt-4","p-3","bg-red-50","border","border-red-200","rounded-md"],[1,"text-sm","text-red-600"],[1,"mr-2"],[1,"fas","fa-spinner","fa-spin"]],template:function(e,i){if(e&1&&(n(0,"div",0),c("click",function(){return i.onCancel()}),n(1,"div",1),c("click",function(u){return u.stopPropagation()}),n(2,"form",2),c("ngSubmit",function(){return i.onSubmit()}),n(3,"div",3)(4,"h3",4),p(5,Ce,1,0,"i",5)(6,Se,1,0,"i",6),l(7),r()(),n(8,"div",7)(9,"div",8)(10,"div")(11,"label",9),l(12,"Nome"),r(),d(13,"input",10),p(14,Ue,2,0,"div",11),r(),n(15,"div")(16,"label",9),l(17,"Cognome"),r(),d(18,"input",12),p(19,Pe,2,0,"div",11),r(),n(20,"div")(21,"label",9),l(22,"Email"),r(),d(23,"input",13),p(24,Ie,3,2,"div",11),r(),p(25,Te,5,1,"div",14),n(26,"div")(27,"label",9),l(28,"Ruolo"),r(),n(29,"select",15)(30,"option",16),l(31,"Seleziona ruolo"),r(),n(32,"option",17),l(33,"Dipendente"),r(),n(34,"option",18),l(35,"Amministratore"),r()(),p(36,Le,2,0,"div",11),r()(),p(37,De,3,1,"div",19),r(),n(38,"div",20)(39,"button",21),c("click",function(){return i.onCancel()}),l(40," Annulla "),r(),n(41,"button",22),p(42,Ve,2,0,"span",23),l(43),r()()()()()),e&2){let s,u,M,I;a(2),m("formGroup",i.userForm),a(3),m("ngIf",!i.data.user.id_user),a(),m("ngIf",i.data.user.id_user),a(),b(" ",i.data.title," "),a(7),m("ngIf",((s=i.userForm.get("nome"))==null?null:s.invalid)&&((s=i.userForm.get("nome"))==null?null:s.touched)),a(5),m("ngIf",((u=i.userForm.get("cognome"))==null?null:u.invalid)&&((u=i.userForm.get("cognome"))==null?null:u.touched)),a(5),m("ngIf",((M=i.userForm.get("email"))==null?null:M.invalid)&&((M=i.userForm.get("email"))==null?null:M.touched)),a(),m("ngIf",!i.data.user.id_user),a(11),m("ngIf",((I=i.userForm.get("authorities"))==null?null:I.invalid)&&((I=i.userForm.get("authorities"))==null?null:I.touched)),a(),m("ngIf",i.errorMessage),a(2),m("disabled",i.isLoading),a(2),m("disabled",i.isLoading||i.userForm.invalid),a(),m("ngIf",i.isLoading),a(),b(" ",i.isLoading?i.data.user.id_user?"Salvataggio...":"Creazione...":i.data.user.id_user?"Salva":"Crea"," ")}},dependencies:[L,T,ue,ae,j,A,D,N,V,ne,se,le],encapsulation:2})};var B=class o{constructor(t){this.adminService=t}users=[];filteredUsers=new F([]);loadingSubject=new F(!1);searchTermSubject=new F("");filteredUsers$=J([this.filteredUsers.asObservable(),this.searchTermSubject.asObservable()]).pipe(Y(([t,e])=>{if(!e.trim())return t;let i=e.toLowerCase();return t.filter(s=>s.nome.toLowerCase().includes(i)||s.cognome.toLowerCase().includes(i)||s.email.toLowerCase().includes(i))}));loading$=this.loadingSubject.asObservable();getOriginalUsers(){return[...this.users]}loadUsers(){return _(this,null,function*(){try{this.loadingSubject.next(!0);let t=yield C(this.adminService.getAllUsers());this.users=t,this.filteredUsers.next(t)}catch(t){console.error("Errore nel caricamento degli utenti:",t),this.filteredUsers.next([])}finally{this.loadingSubject.next(!1)}})}setSearchTerm(t){this.searchTermSubject.next(t.toLowerCase())}getFilteredUsers(){return this.filteredUsers$}getAllUsers(){return this.filteredUsers.asObservable()}createUser(t){return _(this,null,function*(){try{this.loadingSubject.next(!0);let e=yield C(this.adminService.createUser(t));return yield this.loadUsers(),e}catch(e){throw console.error("Errore durante la creazione dell'utente:",e),e}finally{this.loadingSubject.next(!1)}})}updateUser(t,e){return _(this,null,function*(){try{this.loadingSubject.next(!0);let i=yield C(this.adminService.updateUser(t,e));return yield this.loadUsers(),i}catch(i){throw console.error("Errore durante l'aggiornamento dell'utente:",i),i}finally{this.loadingSubject.next(!1)}})}deleteUser(t){return _(this,null,function*(){try{this.loadingSubject.next(!0),yield C(this.adminService.deleteUser(t)),yield this.loadUsers()}catch(e){throw console.error("Errore durante l'eliminazione dell'utente:",e),e}finally{this.loadingSubject.next(!1)}})}getUserById(t){return _(this,null,function*(){try{return this.loadingSubject.next(!0),yield C(this.adminService.getUserById(t))}catch(e){throw console.error("Errore durante il recupero dell'utente:",e),e}finally{this.loadingSubject.next(!1)}})}static \u0275fac=function(e){return new(e||o)(X(be))};static \u0275prov=Q({token:o,factory:o.\u0275fac,providedIn:"root"})};function je(o,t){o&1&&(S(),n(0,"svg",43),d(1,"path",44),r())}function Ae(o,t){o&1&&d(0,"div",45)}function Re(o,t){if(o&1){let e=E();n(0,"tr",46)(1,"td",47),l(2),r(),n(3,"td",48),l(4),r(),n(5,"td",48),l(6),r(),n(7,"td",47),l(8),r(),n(9,"td",49)(10,"span",50),l(11),r()(),n(12,"td",51)(13,"button",52),c("click",function(){let s=f(e).$implicit,u=g();return h(u.editUser(s))}),l(14," Modifica "),r(),n(15,"button",53),c("click",function(){let s=f(e).$implicit,u=g();return h(u.deleteUser(s))}),l(16," Elimina "),r()()()}if(o&2){let e=t.$implicit;a(2),b(" ",e.id_user," "),a(2),b(" ",e.nome," "),a(2),b(" ",e.cognome," "),a(2),b(" ",e.email," "),a(2),Z(e.authorities.includes("ROLE_ADMIN")?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),a(),b(" ",e.authorities.includes("ROLE_ADMIN")?"Amministratore":"Dipendente"," ")}}function Be(o,t){o&1&&(n(0,"tr")(1,"td",54)(2,"div",55),d(3,"lucide-icon",56),n(4,"p"),l(5,"Nessun utente trovato"),r()()()())}function $e(o,t){o&1&&(n(0,"div",57),d(1,"div",58),r())}function ze(o,t){if(o&1&&(n(0,"option",74),l(1),r()),o&2){let e=t.$implicit;m("value",e),a(),w(e)}}function Ge(o,t){if(o&1){let e=E();n(0,"button",75),c("click",function(){let s=f(e).$implicit,u=g(2);return h(u.onPageChange(s))}),l(1),r()}if(o&2){let e=t.$implicit,i=g(2);P("bg-blue-600",e===i.currentPage)("text-white",e===i.currentPage)("text-gray-700",e!==i.currentPage)("hover:bg-gray-100",e!==i.currentPage),a(),b(" ",e," ")}}function qe(o,t){if(o&1){let e=E();n(0,"div",59)(1,"div",2)(2,"div",60)(3,"label",61),l(4,"Mostra:"),r(),n(5,"select",62),q("ngModelChange",function(s){f(e);let u=g();return G(u.itemsPerPage,s)||(u.itemsPerPage=s),h(s)}),c("ngModelChange",function(s){f(e);let u=g();return h(u.onItemsPerPageChange(s))}),p(6,ze,2,2,"option",63),r(),n(7,"span",64),l(8,"elementi per pagina"),r()(),n(9,"div",65),l(10),r(),n(11,"div",66)(12,"button",67),c("click",function(){f(e);let s=g();return h(s.goToFirstPage())}),S(),n(13,"svg",68),d(14,"path",69),r()(),k(),n(15,"button",67),c("click",function(){f(e);let s=g();return h(s.goToPreviousPage())}),S(),n(16,"svg",68),d(17,"path",70),r()(),p(18,Ge,2,9,"button",71),k(),n(19,"button",67),c("click",function(){f(e);let s=g();return h(s.goToNextPage())}),S(),n(20,"svg",68),d(21,"path",72),r()(),k(),n(22,"button",67),c("click",function(){f(e);let s=g();return h(s.goToLastPage())}),S(),n(23,"svg",68),d(24,"path",73),r()()()()()}if(o&2){let e=g();a(5),z("ngModel",e.itemsPerPage),a(),m("ngForOf",e.pageOptions),a(4),ee(" Visualizzati ",e.getStartIndex(),"-",e.getEndIndex()," di ",e.totalItems," risultati "),a(2),m("disabled",e.currentPage===1),a(3),m("disabled",e.currentPage===1),a(3),m("ngForOf",e.pageNumbers),a(),m("disabled",e.currentPage===e.totalPages),a(3),m("disabled",e.currentPage===e.totalPages)}}function He(o,t){if(o&1){let e=E();n(0,"app-user-form-dialog",76),c("submitted",function(s){f(e);let u=g();return h(u.onModalSubmit(s))})("cancelled",function(){f(e);let s=g();return h(s.closeModal())}),r()}if(o&2){let e=g();m("data",e.modalData)}}var xe=class o{constructor(t,e){this.userManagementService=t;this.toastService=e;this.loading$=this.userManagementService.loading$}users=[];filteredUsers=[];paginatedUsers=[];loading$;searchTerm="";destroy$=new W;currentFilter="all";currentPage=1;itemsPerPage=25;totalItems=0;totalPages=0;pageOptions=[10,25,50,100];pageNumbers=[];showModal=!1;isModalLoading=!1;modalData={title:"",user:{}};ngOnInit(){this.loadUsers(),this.updatePagination(),this.userManagementService.getFilteredUsers().pipe(K(this.destroy$)).subscribe(t=>{this.users=t,this.applyCurrentFilter()})}loadUsers(){return _(this,null,function*(){try{yield this.userManagementService.loadUsers()}catch{this.toastService.showError("Errore di Caricamento","Errore nel caricamento degli utenti")}})}applyFilter(t){let e=t.target.value;this.searchTerm=e,this.applyCurrentFilter()}applyCurrentFilter(){let t=[...this.users];if(this.currentFilter==="admin"?t=t.filter(e=>e.authorities?.includes("ROLE_ADMIN")):this.currentFilter==="user"&&(t=t.filter(e=>!e.authorities?.includes("ROLE_ADMIN"))),this.searchTerm.trim()){let e=this.searchTerm.toLowerCase();t=t.filter(i=>i.nome?.toLowerCase().includes(e)||i.cognome?.toLowerCase().includes(e)||i.email?.toLowerCase().includes(e))}this.filteredUsers=t,this.currentPage=1,this.updatePagination()}createUser(){this.modalData={title:"Nuovo Utente",user:{}},this.showModal=!0}onModalSubmit(t){return _(this,null,function*(){if(!t){this.closeModal();return}try{this.isModalLoading=!0,this.modalData.user.id_user?(yield this.userManagementService.updateUser(this.modalData.user.id_user,t),this.toastService.showSuccess("Utente Aggiornato","Utente aggiornato con successo")):(yield this.userManagementService.createUser(t),this.toastService.showSuccess("Utente Creato","Utente creato con successo")),this.closeModal()}catch{this.toastService.showError("Errore Operazione",this.modalData.user.id_user?"Errore durante l'aggiornamento dell'utente":"Errore durante la creazione dell'utente")}finally{this.isModalLoading=!1}})}editUser(t){this.modalData={title:"Modifica Utente",user:H({},t)},this.showModal=!0}closeModal(){this.showModal=!1,this.isModalLoading=!1,this.modalData={title:"",user:{}}}deleteUser(t){return _(this,null,function*(){if(confirm(`Sei sicuro di voler eliminare l'utente ${t.nome} ${t.cognome}?`))try{yield this.userManagementService.deleteUser(t.id_user),this.toastService.showSuccess("Utente Eliminato","Utente eliminato con successo")}catch{this.toastService.showError("Errore Eliminazione","Errore durante l'eliminazione dell'utente")}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getTotalUsers(){return this.users.length}getAdminCount(){return this.users.filter(t=>t.authorities?.includes("ROLE_ADMIN")).length}getUserCount(){return this.users.filter(t=>!t.authorities?.includes("ROLE_ADMIN")).length}filterByRole(t){this.currentFilter=t,this.applyCurrentFilter()}updatePagination(){this.totalItems=this.filteredUsers.length,this.totalPages=Math.ceil(this.totalItems/this.itemsPerPage),this.currentPage>this.totalPages&&(this.currentPage=Math.max(1,this.totalPages));let t=(this.currentPage-1)*this.itemsPerPage,e=t+this.itemsPerPage;this.paginatedUsers=this.filteredUsers.slice(t,e),this.generatePageNumbers()}generatePageNumbers(){this.pageNumbers=[];let e=Math.max(1,this.currentPage-Math.floor(5/2)),i=Math.min(this.totalPages,e+5-1);i-e+1<5&&(e=Math.max(1,i-5+1));for(let s=e;s<=i;s++)this.pageNumbers.push(s)}onPageChange(t){t>=1&&t<=this.totalPages&&t!==this.currentPage&&(this.currentPage=t,this.updatePagination())}onItemsPerPageChange(t){this.itemsPerPage=t,this.currentPage=1,this.updatePagination()}goToFirstPage(){this.onPageChange(1)}goToLastPage(){this.onPageChange(this.totalPages)}goToPreviousPage(){this.onPageChange(this.currentPage-1)}goToNextPage(){this.onPageChange(this.currentPage+1)}getStartIndex(){return this.totalItems===0?0:(this.currentPage-1)*this.itemsPerPage+1}getEndIndex(){return Math.min(this.currentPage*this.itemsPerPage,this.totalItems)}static \u0275fac=function(e){return new(e||o)(U(B),U(he))};static \u0275cmp=O({type:o,selectors:[["app-user-list"]],features:[te([])],decls:91,vars:33,consts:[[1,"max-w-7xl","mx-auto","p-4","sm:p-6","space-y-6"],[1,"bg-white","rounded-xl","shadow-sm","p-6","border","border-gray-100"],[1,"flex","flex-col","sm:flex-row","justify-between","items-start","sm:items-center","gap-4"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"inline-flex","items-center","px-4","py-2","bg-blue-600","hover:bg-blue-700","disabled:bg-blue-400","disabled:cursor-not-allowed","text-white","rounded-lg","transition-colors","duration-200",3,"click","disabled"],["class","w-4 h-4 mr-2","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],["class","animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-600"],[1,"text-2xl","font-bold","text-gray-900","mt-1"],[1,"p-3","bg-blue-50","rounded-lg"],["name","users",1,"w-6","h-6","text-blue-600"],[1,"p-3","bg-purple-50","rounded-lg"],["name","shield",1,"w-6","h-6","text-purple-600"],[1,"p-3","bg-green-50","rounded-lg"],["name","user",1,"w-6","h-6","text-green-600"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100"],[1,"p-6","border-b","border-gray-100"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-4"],[1,"flex","flex-col","md:flex-row","gap-4","flex-1"],[1,"relative","w-full","md:w-96"],["type","text","placeholder","Cerca per nome, email...",1,"w-full","border","border-gray-300","rounded-lg","px-4","py-2","pr-10","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition-all","duration-200",3,"ngModelChange","keyup","ngModel"],["name","search",1,"w-5","h-5","text-gray-400","absolute","right-3","top-1/2","transform","-translate-y-1/2"],[1,"flex","gap-2"],[1,"px-4","py-2","rounded-lg","text-sm","font-medium","flex","items-center","gap-2","hover:bg-gray-50","transition-colors","cursor-pointer",3,"click"],["name","users",1,"w-4","h-4"],["name","shield",1,"w-4","h-4"],["name","user",1,"w-4","h-4"],[1,"px-4","py-2","rounded-lg","text-sm","font-medium","flex","items-center","gap-2","bg-blue-600","hover:bg-blue-700","text-white","transition-colors","cursor-pointer",3,"click"],["name","plus",1,"w-4","h-4"],[1,"min-h-[500px]","flex","flex-col"],[1,"overflow-x-auto","flex-grow"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-4","sm:px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],["class","hover:bg-gray-50 transition-colors duration-150",4,"ngFor","ngForOf"],[4,"ngIf"],["class","flex justify-center items-center py-8",4,"ngIf"],["class","bg-white px-4 py-3 border-t border-gray-200 sm:px-6 rounded-b-xl",4,"ngIf"],[3,"data","submitted","cancelled",4,"ngIf"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"animate-spin","rounded-full","h-4","w-4","border-b-2","border-white","mr-2"],[1,"hover:bg-gray-50","transition-colors","duration-150"],[1,"px-4","sm:px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],[1,"px-4","sm:px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-4","sm:px-6","py-4","whitespace-nowrap"],[1,"px-2","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full"],[1,"px-4","sm:px-6","py-4","whitespace-nowrap","text-sm","font-medium"],["type","button",1,"inline-flex","items-center","px-2.5","py-1.5","border","border-transparent","text-xs","font-medium","rounded","text-blue-700","bg-blue-100","hover:bg-blue-200","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","transition-colors","duration-200","mr-2","cursor-pointer",3,"click"],["type","button",1,"inline-flex","items-center","px-2.5","py-1.5","border","border-transparent","text-xs","font-medium","rounded","text-red-700","bg-red-100","hover:bg-red-200","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-red-500","transition-colors","duration-200","cursor-pointer",3,"click"],["colspan","6",1,"px-4","sm:px-6","py-8","text-center","text-sm","text-gray-500"],[1,"flex","flex-col","items-center","justify-center","space-y-2"],["name","users",1,"w-8","h-8","text-gray-400"],[1,"flex","justify-center","items-center","py-8"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"bg-white","px-4","py-3","border-t","border-gray-200","sm:px-6","rounded-b-xl"],[1,"flex","items-center","gap-2"],[1,"text-sm","font-medium","text-gray-700"],[1,"border","border-gray-300","rounded-md","px-3","py-1","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"text-sm","text-gray-500"],[1,"text-sm","text-gray-700"],[1,"flex","items-center","gap-1"],[1,"p-2","text-gray-500","hover:text-gray-700","disabled:text-gray-300","disabled:cursor-not-allowed",3,"click","disabled"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 19l-7-7 7-7m8 14l-7-7 7-7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],["class","px-3 py-1 mx-1 text-sm font-medium rounded-md transition-colors duration-200",3,"bg-blue-600","text-white","text-gray-700","hover:bg-gray-100","click",4,"ngFor","ngForOf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 5l7 7-7 7M5 5l7 7-7 7"],[3,"value"],[1,"px-3","py-1","mx-1","text-sm","font-medium","rounded-md","transition-colors","duration-200",3,"click"],[3,"submitted","cancelled","data"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),l(5,"Gestione Utenti"),r(),n(6,"p",4),l(7,"Gestisci gli utenti del sistema e i loro ruoli"),r()(),n(8,"button",5),x(9,"async"),c("click",function(){return i.loadUsers()}),p(10,je,2,0,"svg",6),x(11,"async"),p(12,Ae,1,0,"div",7),x(13,"async"),l(14),x(15,"async"),r()()(),n(16,"div",8)(17,"div",1)(18,"div",9)(19,"div")(20,"p",10),l(21,"Utenti Totali"),r(),n(22,"h3",11),l(23),r()(),n(24,"div",12),d(25,"lucide-icon",13),r()()(),n(26,"div",1)(27,"div",9)(28,"div")(29,"p",10),l(30,"Amministratori"),r(),n(31,"h3",11),l(32),r()(),n(33,"div",14),d(34,"lucide-icon",15),r()()(),n(35,"div",1)(36,"div",9)(37,"div")(38,"p",10),l(39,"Dipendenti"),r(),n(40,"h3",11),l(41),r()(),n(42,"div",16),d(43,"lucide-icon",17),r()()()(),n(44,"div",18)(45,"div",19)(46,"div",20)(47,"div",21)(48,"div",22)(49,"input",23),q("ngModelChange",function(u){return G(i.searchTerm,u)||(i.searchTerm=u),u}),c("keyup",function(u){return i.applyFilter(u)}),r(),d(50,"lucide-icon",24),r(),n(51,"div",25)(52,"button",26),c("click",function(){return i.filterByRole("all")}),d(53,"lucide-icon",27),l(54," Tutti "),r(),n(55,"button",26),c("click",function(){return i.filterByRole("admin")}),d(56,"lucide-icon",28),l(57," Amministratori "),r(),n(58,"button",26),c("click",function(){return i.filterByRole("user")}),d(59,"lucide-icon",29),l(60," Dipendenti "),r()()(),n(61,"button",30),c("click",function(){return i.createUser()}),d(62,"lucide-icon",31),l(63," Nuovo Utente "),r()()(),n(64,"div",32)(65,"div",33)(66,"table",34)(67,"thead",35)(68,"tr")(69,"th",36),l(70,"ID"),r(),n(71,"th",36),l(72,"Nome"),r(),n(73,"th",36),l(74,"Cognome"),r(),n(75,"th",36),l(76,"Email"),r(),n(77,"th",36),l(78,"Ruolo"),r(),n(79,"th",36),l(80,"Azioni"),r()()(),n(81,"tbody",37),p(82,Re,17,7,"tr",38)(83,Be,6,0,"tr",39),x(84,"async"),r()()(),p(85,$e,2,0,"div",40),x(86,"async"),r(),p(87,qe,25,10,"div",41),x(88,"async"),r()(),p(89,He,1,1,"app-user-form-dialog",42),d(90,"p-toast")),e&2&&(a(8),m("disabled",v(9,19,i.loading$)),a(2),m("ngIf",!v(11,21,i.loading$)),a(2),m("ngIf",v(13,23,i.loading$)),a(2),b(" ",v(15,25,i.loading$)?"Aggiornamento...":"Aggiorna"," "),a(9),w(i.getTotalUsers()),a(9),w(i.getAdminCount()),a(9),w(i.getUserCount()),a(8),z("ngModel",i.searchTerm),a(3),P("bg-blue-50",i.currentFilter==="all"),a(3),P("bg-purple-50",i.currentFilter==="admin"),a(3),P("bg-green-50",i.currentFilter==="user"),a(24),m("ngForOf",i.paginatedUsers),a(),m("ngIf",!(i.paginatedUsers!=null&&i.paginatedUsers.length)&&!v(84,27,i.loading$)),a(2),m("ngIf",v(86,29,i.loading$)),a(2),m("ngIf",!v(88,31,i.loading$)&&i.totalItems>0),a(2),m("ngIf",i.showModal))},dependencies:[L,ie,T,re,ce,pe,de,j,A,D,N,V,oe,R,fe,ge],styles:["[_nghost-%COMP%]     .p-toast{z-index:9999}[_nghost-%COMP%]     .p-toast .p-toast-message{margin:0 0 .5rem;box-shadow:0 10px 25px -5px #0000001a,0 10px 10px -5px #0000000a;border-radius:.75rem;border:none;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);animation:_ngcontent-%COMP%_slideInRight .3s ease-out;min-width:320px;max-width:420px;background:#fffffff2;transform-origin:right center}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-leave{animation:_ngcontent-%COMP%_slideOutRight .25s ease-in forwards!important;overflow:hidden!important}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-leave, [_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-leave *, [_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-leave *:before, [_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-leave *:after{transform:none!important;transition:none!important;animation:none!important}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-leave{animation:_ngcontent-%COMP%_slideOutRight .25s ease-in forwards!important}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-success{border-left:4px solid #10b981}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-success .p-toast-message-icon{color:#10b981;background:#dcfce7;border-radius:50%;width:2rem;height:2rem;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-error{border-left:4px solid #ef4444}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-error .p-toast-message-icon{color:#ef4444;background:#fee2e2;border-radius:50%;width:2rem;height:2rem;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-info{border-left:4px solid #3b82f6}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-info .p-toast-message-icon{color:#3b82f6;background:#dbeafe;border-radius:50%;width:2rem;height:2rem;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-warn{border-left:4px solid #f59e0b}[_nghost-%COMP%]     .p-toast .p-toast-message.p-toast-message-warn .p-toast-message-icon{color:#f59e0b;background:#fef3c7;border-radius:50%;width:2rem;height:2rem;display:flex;align-items:center;justify-content:center;margin-right:.75rem;flex-shrink:0}[_nghost-%COMP%]     .p-toast .p-toast-message .p-toast-message-icon{margin-right:.75rem;flex-shrink:0}[_nghost-%COMP%]     .p-toast .p-toast-message .p-toast-message-text{flex:1;min-width:0}@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}@keyframes _ngcontent-%COMP%_slideOutRight{0%{transform:translate(0);opacity:1}to{transform:translate(100%);opacity:0}}[_nghost-%COMP%]     .p-toast .p-toast-message .p-toast-message-content{padding:1rem;border:none;border-radius:.75rem;background:transparent;display:flex;align-items:flex-start;gap:.75rem}[_nghost-%COMP%]     .p-toast .p-toast-message .p-toast-summary{font-weight:500;color:#111827;font-size:.875rem;margin-bottom:.25rem;line-height:1.4}[_nghost-%COMP%]     .p-toast .p-toast-message .p-toast-detail{color:#6b7280;font-size:.875rem;line-height:1.5;word-wrap:break-word}[_nghost-%COMP%]     .p-toast-top-right{top:1rem;right:1rem}[_nghost-%COMP%]     .p-toast .p-toast-message:hover{transform:translateY(-1px);transition:transform .2s ease}[_nghost-%COMP%]     .p-toast .p-toast-message .p-toast-icon-close{color:#9ca3af;background:transparent;border:none;padding:.375rem;border-radius:.5rem;transition:all .2s ease}[_nghost-%COMP%]     .p-toast .p-toast-message .p-toast-icon-close:hover{color:#4b5563;background:#f3f4f6}","[_nghost-%COMP%]{display:block;min-height:100vh}[_nghost-%COMP%]     body{overflow-y:scroll}"]})};export{xe as UserListComponent};
